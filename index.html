<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oly Systems - Auditor√≠a de Ecosistema IA</title>
    <!-- Tailwind CSS para el dise√±o premium -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons para la iconograf√≠a -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap');
        
        :root {
            --primary: #4f46e5;
            --primary-hover: #4338ca;
        }

        body { 
            font-family: 'Inter', sans-serif; 
            scroll-behavior: smooth;
        }

        /* Estilos personalizados para los sliders */
        input[type="range"] {
            -webkit-appearance: none;
            height: 6px;
            background: #e2e8f0;
            border-radius: 5px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            background: var(--primary);
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .card-glass {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(226, 232, 240, 0.8);
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .loading-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen">

    <div class="max-w-7xl mx-auto p-4 md:p-8">
        
        <!-- HEADER -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-8 bg-white p-6 rounded-3xl shadow-sm border border-slate-100">
            <div class="flex items-center gap-4">
                <div class="bg-indigo-600 p-2.5 rounded-2xl shadow-lg shadow-indigo-200 animate-float">
                    <i data-lucide="zap" class="text-white w-6 h-6"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-black tracking-tight text-slate-800 uppercase leading-none mb-1">Oly Systems</h1>
                    <p class="text-[10px] font-bold text-indigo-500 uppercase tracking-[0.2em]">IA Automation Audit v4.0</p>
                </div>
            </div>
            
            <div class="flex gap-6 mt-6 md:mt-0">
                <div class="text-right border-r pr-6 border-slate-100">
                    <p class="text-[9px] text-slate-400 font-black uppercase tracking-widest mb-1">Sincronizaci√≥n</p>
                    <p id="api-status" class="text-[10px] font-bold text-amber-500 flex items-center gap-1.5 justify-end loading-pulse">
                        <i data-lucide="refresh-cw" class="w-3 h-3"></i> Conectando...
                    </p>
                </div>
                <div class="text-right">
                    <p class="text-[9px] text-slate-400 font-black uppercase tracking-widest mb-1">Mercado Actual</p>
                    <p id="display-pais" class="text-xs font-bold text-slate-700 flex items-center gap-1.5 justify-end">
                        <span id="country-flag">üá≤üáΩ</span> <span id="country-name">M√©xico</span>
                    </p>
                </div>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- PANEL DE CONTROL (INPUTS) -->
            <aside class="lg:col-span-4 space-y-6">
                <div class="bg-white p-8 rounded-[2.5rem] shadow-xl shadow-slate-200/40 border border-slate-100">
                    <h3 class="text-lg font-bold mb-6 flex items-center gap-2">
                        <i data-lucide="settings-2" class="w-5 h-5 text-indigo-500"></i> Par√°metros de la Cl√≠nica
                    </h3>
                    
                    <div class="space-y-6">
                        <!-- Selecci√≥n de Pa√≠s -->
                        <div>
                            <label class="flex items-center gap-2 text-[10px] font-black text-slate-500 uppercase mb-2 tracking-wider">
                                <i data-lucide="globe" class="w-3 h-3 text-indigo-400"></i> Pa√≠s / Divisa
                            </label>
                            <select id="input-pais" class="w-full p-3.5 bg-slate-50 border-0 rounded-xl ring-1 ring-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none transition-all font-semibold text-sm cursor-pointer">
                                <!-- Opciones cargadas por JS -->
                            </select>
                        </div>

                        <!-- Datos Num√©ricos -->
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="text-[10px] font-black text-slate-500 uppercase mb-2 block tracking-wider">Mensajes / D√≠a</label>
                                <input type="number" id="input-mensajes" value="350" class="w-full p-3.5 bg-slate-50 border-0 rounded-xl ring-1 ring-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none font-bold text-slate-700">
                            </div>
                            <div>
                                <label class="text-[10px] font-black text-slate-500 uppercase mb-2 block tracking-wider text-indigo-500">Ticket M√≠nimo</label>
                                <input type="number" id="input-ticket" value="1200" class="w-full p-3.5 bg-slate-50 border-0 rounded-xl ring-1 ring-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none font-bold text-slate-700">
                                <span id="usd-input-ticket" class="text-[9px] text-slate-400 font-bold mt-1.5 block tracking-tighter"></span>
                            </div>
                        </div>

                        <!-- Gasto N√≥mina -->
                        <div>
                            <label class="flex items-center gap-2 text-[10px] font-black text-slate-500 uppercase mb-2 tracking-wider">
                                <i data-lucide="users" class="w-3 h-3 text-indigo-400"></i> Gasto Mensual en Recepci√≥n
                            </label>
                            <input type="number" id="input-nomina" value="15000" class="w-full p-4 bg-slate-50 border-0 rounded-xl ring-1 ring-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none font-black text-xl text-indigo-600 shadow-inner">
                            <span id="usd-input-nomina" class="text-[10px] text-indigo-400 font-bold mt-2 block opacity-80 tracking-tighter"></span>
                        </div>

                        <!-- Sliders de Tasas -->
                        <div class="pt-4 space-y-7 border-t border-slate-100">
                            <div>
                                <div class="flex justify-between mb-2">
                                    <label class="text-[10px] font-black text-slate-500 uppercase tracking-widest">Tasa de Agenda Actual</label>
                                    <span id="val-agenda" class="text-xs font-black text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded">10%</span>
                                </div>
                                <input type="range" id="input-agenda" min="1" max="50" step="1" value="10" class="w-full">
                            </div>
                            <div>
                                <div class="flex justify-between mb-2">
                                    <label class="text-[10px] font-black text-slate-500 uppercase tracking-widest">Tasa de Asistencia Actual</label>
                                    <span id="val-asistencia" class="text-xs font-black text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded">70%</span>
                                </div>
                                <input type="range" id="input-asistencia" min="1" max="100" step="1" value="70" class="w-full">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Info Alert -->
                <div class="bg-indigo-900 text-white p-7 rounded-[2rem] shadow-lg shadow-indigo-100 relative overflow-hidden group">
                    <div class="relative z-10">
                        <div class="flex gap-3 items-center mb-3">
                            <i data-lucide="info" class="w-4 h-4 text-indigo-300"></i>
                            <span class="text-[10px] font-black uppercase tracking-widest text-indigo-300">Ventaja Competitiva</span>
                        </div>
                        <p class="text-xs font-medium italic opacity-90 leading-relaxed">
                            "Nuestra IA responde en 0.4s, eliminando la 'Fuga por Abandono' que afecta al 65% de las cl√≠nicas en LATAM."
                        </p>
                    </div>
                    <div class="absolute -right-4 -bottom-4 w-20 h-20 bg-white/5 rounded-full group-hover:scale-150 transition-transform duration-700"></div>
                </div>
            </aside>

            <!-- PANEL DE RESULTADOS -->
            <main class="lg:col-span-8 space-y-6">
                
                <!-- HERO CARD: INGRESO TOTAL -->
                <section class="bg-indigo-600 p-10 rounded-[3rem] text-white shadow-2xl shadow-indigo-200 relative overflow-hidden group">
                    <div class="relative z-10">
                        <p class="text-indigo-200 text-[10px] font-black uppercase tracking-widest mb-3 italic">Ingreso Total Proyectado con Oly Systems</p>
                        <h2 id="res-ingreso-total" class="text-5xl md:text-7xl font-black mb-2 tracking-tighter">
                            $0.00
                        </h2>
                        <p id="usd-res-ingreso-total" class="text-indigo-200 text-sm mb-8 opacity-90 font-bold tracking-tight"></p>
                        
                        <div class="flex flex-wrap gap-4">
                            <div class="flex flex-col bg-white/10 p-4 rounded-2xl backdrop-blur-md border border-white/20 min-w-[160px]">
                                <span class="flex items-center gap-2 text-xs font-black mb-1">
                                    <i data-lucide="trending-up" class="w-4 h-4 text-green-400"></i>
                                    Ventas Extras
                                </span>
                                <span id="res-ventas-extras" class="text-lg font-bold">$0</span>
                                <span id="usd-res-ventas-extras" class="text-[10px] opacity-60 font-bold mt-1"></span>
                            </div>
                            <div class="flex flex-col bg-white/10 p-4 rounded-2xl backdrop-blur-md border border-white/20 min-w-[160px]">
                                <span class="flex items-center gap-2 text-xs font-black mb-1 text-indigo-100">
                                    <i data-lucide="scissors" class="w-4 h-4 text-indigo-300"></i>
                                    Ahorro en N√≥mina
                                </span>
                                <span id="res-ahorro-operativo" class="text-lg font-bold">$0</span>
                                <span id="usd-res-ahorro-operativo" class="text-[10px] opacity-60 font-bold mt-1"></span>
                            </div>
                        </div>
                    </div>
                    <!-- Decoraci√≥n Background -->
                    <div class="absolute top-0 right-0 w-96 h-96 bg-white/5 rounded-full translate-x-1/3 -translate-y-1/3 blur-3xl opacity-50 group-hover:scale-110 transition-transform duration-1000"></div>
                </section>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    
                    <!-- COMPARATIVA DE INVERSI√ìN -->
                    <div class="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 flex flex-col h-full">
                        <h4 class="text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-8">An√°lisis de Inversi√≥n</h4>
                        
                        <div class="space-y-8 flex-grow">
                            <!-- Humano -->
                            <div>
                                <div class="flex justify-between items-end mb-3">
                                    <div class="flex flex-col">
                                        <span class="text-[10px] font-black text-slate-500 uppercase tracking-tighter">Gasto Humano Actual</span>
                                        <span id="usd-res-costo-humano" class="text-[9px] opacity-60 font-bold tracking-tight text-slate-400"></span>
                                    </div>
                                    <span id="res-costo-humano" class="text-sm font-black text-slate-700">$0</span>
                                </div>
                                <div class="h-2.5 w-full bg-slate-100 rounded-full overflow-hidden">
                                    <div class="h-full bg-slate-300 rounded-full" style="width: 100%;"></div>
                                </div>
                            </div>

                            <!-- IA -->
                            <div>
                                <div class="flex justify-between items-end mb-3">
                                    <div class="flex flex-col">
                                        <span class="text-[10px] font-black text-indigo-600 uppercase tracking-tighter italic">Inversi√≥n Ecosistema IA</span>
                                        <span id="usd-res-costo-ia" class="text-[9px] opacity-60 font-bold tracking-tight text-indigo-400"></span>
                                    </div>
                                    <span id="res-costo-ia" class="text-sm font-black text-indigo-600">$0</span>
                                </div>
                                <div class="h-2.5 w-full bg-indigo-50 rounded-full overflow-hidden">
                                    <div id="bar-ia" class="h-full bg-indigo-600 rounded-full shadow-[0_0_12px_rgba(79,70,229,0.3)] transition-all duration-1000" style="width: 0%;"></div>
                                </div>
                            </div>

                            <!-- Desglose -->
                            <div class="pt-6 border-t border-slate-50">
                                <p class="text-[9px] font-black text-slate-400 uppercase mb-5 tracking-widest">Desglose de Costos del Ecosistema</p>
                                <div class="space-y-4">
                                    <div class="flex justify-between items-center group">
                                        <div class="flex flex-col">
                                            <span class="text-xs font-bold text-slate-600 group-hover:text-indigo-600 transition-colors cursor-default">Servicio Oly Systems</span>
                                            <span id="usd-det-mantenimiento" class="text-[9px] opacity-50 font-bold"></span>
                                        </div>
                                        <span id="det-mantenimiento" class="text-xs font-black text-slate-700">$0</span>
                                    </div>
                                    <div class="flex justify-between items-center group">
                                        <div class="flex flex-col">
                                            <span class="text-xs font-bold text-slate-600 group-hover:text-indigo-600 transition-colors cursor-default">OpenAI (Tokens/Memoria)</span>
                                            <span id="usd-det-openai" class="text-[9px] opacity-50 font-bold"></span>
                                        </div>
                                        <span id="det-openai" class="text-xs font-black text-slate-700">$0</span>
                                    </div>
                                    <div class="flex justify-between items-center group">
                                        <div class="flex flex-col">
                                            <span class="text-xs font-bold text-slate-600 group-hover:text-indigo-600 transition-colors cursor-default">Meta (WhatsApp API)</span>
                                            <span id="usd-det-whatsapp" class="text-[9px] opacity-50 font-bold"></span>
                                        </div>
                                        <span id="det-whatsapp" class="text-xs font-black text-slate-700">$0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- UTILIDAD NETA EXTRA -->
                    <div class="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 flex flex-col justify-between">
                        <div>
                            <h4 class="text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-8">Utilidad Mensual Neta</h4>
                            <div class="space-y-5">
                                <div class="bg-slate-50 p-5 rounded-3xl border border-slate-100/50">
                                    <div class="flex justify-between items-start mb-1">
                                        <p class="text-[9px] font-black text-slate-400 uppercase tracking-widest">Facturaci√≥n Actual</p>
                                        <p id="usd-res-ingreso-humano" class="text-[9px] opacity-50 font-black"></p>
                                    </div>
                                    <p id="res-ingreso-humano" class="text-2xl font-bold text-slate-400 tracking-tighter opacity-60">$0</p>
                                </div>
                                <div class="bg-green-50/50 p-6 rounded-3xl border border-green-100 shadow-sm">
                                    <div class="flex justify-between items-start mb-1">
                                        <p class="text-[9px] font-black text-green-600 uppercase tracking-widest">Facturaci√≥n con IA</p>
                                        <p id="usd-res-ingreso-oly-small" class="text-[9px] text-green-600 opacity-60 font-black"></p>
                                    </div>
                                    <p id="res-ingreso-oly-small" class="text-3xl font-black text-green-700 tracking-tighter">$0</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-8 flex items-center gap-4 bg-green-600 p-5 rounded-[2rem] shadow-xl shadow-green-200 group">
                            <div class="bg-green-500 p-2 rounded-xl group-hover:rotate-12 transition-transform">
                                <i data-lucide="trending-up" class="w-6 h-6 text-white"></i>
                            </div>
                            <div>
                                <p class="text-[9px] font-black uppercase text-green-100 leading-none mb-1.5 tracking-widest">Utilidad Extra Bruta</p>
                                <div class="flex items-center gap-2">
                                    <p id="res-plus-neto" class="text-2xl font-black text-white leading-none tracking-tighter">+$0</p>
                                    <span id="usd-res-plus-neto" class="text-[11px] text-green-100 font-black opacity-80"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- FOOTER CTA -->
                <footer class="bg-slate-900 p-10 rounded-[3rem] flex flex-col md:flex-row items-center justify-between gap-8 border-b-8 border-indigo-600 relative overflow-hidden group">
                    <div class="text-center md:text-left relative z-10">
                        <h4 class="text-white font-black text-3xl mb-2 tracking-tight">¬øEscalamos tu cl√≠nica?</h4>
                        <p class="text-slate-400 text-sm font-medium italic max-w-sm">
                            Este ecosistema se paga solo mediante la utilidad extra del primer mes de implementaci√≥n.
                        </p>
                    </div>
                    <button class="w-full md:w-auto bg-indigo-600 hover:bg-indigo-500 text-white font-black px-12 py-5 rounded-2xl transition-all shadow-2xl shadow-indigo-600/40 flex items-center justify-center gap-3 active:scale-95 relative z-10 group/btn">
                        SOLICITAR IMPLEMENTACI√ìN
                        <i data-lucide="chevron-right" class="w-5 h-5 group-hover/btn:translate-x-1 transition-transform"></i>
                    </button>
                    <!-- Visual decoration -->
                    <div class="absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-indigo-500 to-transparent opacity-20"></div>
                </footer>

                <p class="text-center text-[10px] text-slate-400 font-bold uppercase tracking-[0.4em] py-6 opacity-60">
                    ¬© 2024 Oly Systems | Auditor√≠a T√©cnica M√©dica Digital
                </p>
            </main>
        </div>
    </div>

    <script>
        /**
         * L√ìGICA DE NEGOCIO Y CALCULADORA (JavaScript)
         */

        // 1. Configuraci√≥n de Mercados y Divisas
        const paises = {
            MX: { nombre: 'M√©xico', moneda: 'MXN', simbolo: '$', cambioUSD: 19.50, costoWAService: 0.010, flag: 'üá≤üáΩ' },
            CO: { nombre: 'Colombia', moneda: 'COP', simbolo: '$', cambioUSD: 3950, costoWAService: 0.008, flag: 'üá®üá¥' },
            EC: { nombre: 'Ecuador', moneda: 'USD', simbolo: '$', cambioUSD: 1, costoWAService: 0.010, flag: 'üá™üá®' },
            ES: { nombre: 'Espa√±a', moneda: 'EUR', simbolo: '‚Ç¨', cambioUSD: 0.95, costoWAService: 0.035, flag: 'üá™üá∏' },
            AR: { nombre: 'Argentina', moneda: 'ARS', simbolo: '$', cambioUSD: 1000, costoWAService: 0.010, flag: 'üá¶üá∑' },
            CL: { nombre: 'Chile', moneda: 'CLP', simbolo: '$', cambioUSD: 940, costoWAService: 0.010, flag: 'üá®üá±' },
            PE: { nombre: 'Per√∫', moneda: 'PEN', simbolo: 'S/', cambioUSD: 3.75, costoWAService: 0.010, flag: 'üáµüá™' },
            US: { nombre: 'Estados Unidos', moneda: 'USD', simbolo: '$', cambioUSD: 1, costoWAService: 0.015, flag: 'üá∫üá∏' },
        };

        // 2. Selecci√≥n de Elementos del DOM
        const dom = {
            pais: document.getElementById('input-pais'),
            mensajes: document.getElementById('input-mensajes'),
            ticket: document.getElementById('input-ticket'),
            nomina: document.getElementById('input-nomina'),
            agenda: document.getElementById('input-agenda'),
            asistencia: document.getElementById('input-asistencia'),
            apiStatus: document.getElementById('api-status'),
            displayFlag: document.getElementById('country-flag'),
            displayName: document.getElementById('country-name')
        };

        // 3. Inicializar Selector de Pa√≠ses
        Object.keys(paises).forEach(code => {
            const option = document.createElement('option');
            option.value = code;
            option.textContent = `${paises[code].flag} ${paises[code].nombre}`;
            dom.pais.appendChild(option);
        });

        // 4. Formateadores Profesionales
        function formatLocal(val, paisCode) {
            const config = paises[paisCode];
            return new Intl.NumberFormat('es-' + paisCode, { 
                style: 'currency', 
                currency: config.moneda,
                maximumFractionDigits: 0
            }).format(val);
        }

        function formatUSD(val) {
            return new Intl.NumberFormat('en-US', { 
                style: 'currency', 
                currency: 'USD',
                maximumFractionDigits: 0
            }).format(val);
        }

        // 5. Sincronizaci√≥n de Divisas Real-Time
        async function syncExchangeRates(retries = 0) {
            const url = 'https://open.er-api.com/v6/latest/USD';
            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error('Network Error');
                
                const data = await response.json();
                if (data.result === 'success') {
                    const r = data.rates;
                    if (r.MXN) paises.MX.cambioUSD = r.MXN;
                    if (r.COP) paises.CO.cambioUSD = r.COP;
                    if (r.EUR) paises.ES.cambioUSD = r.EUR;
                    if (r.ARS) paises.AR.cambioUSD = r.ARS;
                    if (r.CLP) paises.CL.cambioUSD = r.CLP;
                    if (r.PEN) paises.PE.cambioUSD = r.PEN;

                    dom.apiStatus.classList.remove('text-amber-500', 'loading-pulse');
                    dom.apiStatus.classList.add('text-green-500');
                    dom.apiStatus.innerHTML = `<i data-lucide="shield-check" class="w-3 h-3"></i> Mercado Actualizado`;
                    lucide.createIcons();
                    
                    updateCalculations();
                }
            } catch (error) {
                if (retries < 3) {
                    setTimeout(() => syncExchangeRates(retries + 1), 2000);
                } else {
                    dom.apiStatus.classList.remove('loading-pulse');
                    dom.apiStatus.classList.add('text-red-500');
                    dom.apiStatus.innerHTML = `<i data-lucide="alert-triangle" class="w-3 h-3"></i> Error Sincro (Usando Base)`;
                    lucide.createIcons();
                }
            }
        }

        // 6. N√∫cleo Matem√°tico de la Auditor√≠a
        function updateCalculations() {
            const code = dom.pais.value;
            const config = paises[code];
            
            const msjsDiarios = Number(dom.mensajes.value);
            const ticket = Number(dom.ticket.value);
            const nominaActual = Number(dom.nomina.value);
            const tAgendaActual = Number(dom.agenda.value);
            const tAsistActual = Number(dom.asistencia.value);

            const interaccionesMes = msjsDiarios * 30;

            // --- COSTOS INFRAESTRUCTURA IA ---
            
            // Meta: WhatsApp API (1 convo x cada 10 msjs aprox)
            const costoMetaUSD = (interaccionesMes / 10) * config.costoWAService;
            const costoMetaLocal = costoMetaUSD * config.cambioUSD;

            // OpenAI: Tokens Robustos ($0.008 USD por cada mensaje con contexto)
            const costoTokensUSD = interaccionesMes * 0.008;
            const costoTokensLocal = costoTokensUSD * config.cambioUSD;

            // Oly Systems: $5,000 MXN base escalado a mercado local
            const baseMXN = 5000;
            const olyUSD = baseMXN / paises.MX.cambioUSD;
            const olyLocal = olyUSD * config.cambioUSD;

            const totalIALocal = costoMetaLocal + costoTokensLocal + olyLocal;
            const ahorroOperativo = nominaActual - totalIALocal;

            // --- PROYECCI√ìN DE INGRESOS ---
            
            // L√≥gica de Negocio: IA mejora +5% la conversi√≥n de agenda
            const conversionIA = tAgendaActual + 5;
            
            const citasActuales = interaccionesMes * (tAgendaActual / 100) * (tAsistActual / 100);
            const ingresoActual = citasActuales * ticket;

            const citasIA = interaccionesMes * (conversionIA / 100) * (tAsistActual / 100);
            const ingresoVentasIA = citasIA * ticket;

            // Ingreso Total = Ahorro N√≥mina + Venta Extra
            const ingresoTotalOly = ingresoVentasIA + ahorroOperativo;

            // --- ACTUALIZACI√ìN DE INTERFAZ ---
            
            dom.displayFlag.textContent = config.flag;
            dom.displayName.textContent = config.nombre;
            document.getElementById('val-agenda').textContent = tAgendaActual + '%';
            document.getElementById('val-asistencia').textContent = tAsistActual + '%';

            // Referencias USD en Inputs
            document.getElementById('usd-input-ticket').textContent = `‚âà ${formatUSD(ticket / config.cambioUSD)} USD`;
            document.getElementById('usd-input-nomina').textContent = `‚âà ${formatUSD(nominaActual / config.cambioUSD)} USD`;

            // Hero Section
            document.getElementById('res-ingreso-total').textContent = formatLocal(ingresoTotalOly, code);
            document.getElementById('usd-res-ingreso-total').textContent = `‚âà ${formatUSD(ingresoTotalOly / config.cambioUSD)} USD`;

            document.getElementById('res-ventas-extras').textContent = formatLocal(ingresoVentasIA - ingresoActual, code);
            document.getElementById('usd-res-ventas-extras').textContent = `‚âà ${formatUSD((ingresoVentasIA - ingresoActual) / config.cambioUSD)} USD`;

            document.getElementById('res-ahorro-operativo').textContent = formatLocal(ahorroOperativo, code);
            document.getElementById('usd-res-ahorro-operativo').textContent = `‚âà ${formatUSD(ahorroOperativo / config.cambioUSD)} USD`;

            // Barras de Inversi√≥n
            document.getElementById('res-costo-humano').textContent = formatLocal(nominaActual, code);
            document.getElementById('usd-res-costo-humano').textContent = `‚âà ${formatUSD(nominaActual / config.cambioUSD)} USD`;
            
            document.getElementById('res-costo-ia').textContent = formatLocal(totalIALocal, code);
            document.getElementById('usd-res-costo-ia').textContent = `‚âà ${formatUSD(totalIALocal / config.cambioUSD)} USD`;
            
            const ratio = (totalIALocal / nominaActual) * 100;
            document.getElementById('bar-ia').style.width = Math.min(100, Math.max(0, ratio)) + '%';

            // Desglose
            document.getElementById('det-mantenimiento').textContent = formatLocal(olyLocal, code);
            document.getElementById('usd-det-mantenimiento').textContent = `‚âà ${formatUSD(olyUSD)} USD`;

            document.getElementById('det-openai').textContent = formatLocal(costoTokensLocal, code);
            document.getElementById('usd-det-openai').textContent = `‚âà ${formatUSD(costoTokensUSD)} USD`;

            document.getElementById('det-whatsapp').textContent = formatLocal(costoMetaLocal, code);
            document.getElementById('usd-det-whatsapp').textContent = `‚âà ${formatUSD(costoMetaUSD)} USD`;

            // Utilidad Neta
            document.getElementById('res-ingreso-humano').textContent = formatLocal(ingresoActual, code);
            document.getElementById('usd-res-ingreso-humano').textContent = `‚âà ${formatUSD(ingresoActual / config.cambioUSD)} USD`;

            const olySmallDisplays = document.querySelectorAll('#res-ingreso-oly-small');
            olySmallDisplays.forEach(el => el.textContent = formatLocal(ingresoTotalOly, code));
            document.getElementById('usd-res-ingreso-oly-small').textContent = `‚âà ${formatUSD(ingresoTotalOly / config.cambioUSD)} USD`;

            document.getElementById('res-plus-neto').textContent = '+' + formatLocal(ingresoTotalOly - ingresoActual, code);
            document.getElementById('usd-res-plus-neto').textContent = `(${formatUSD((ingresoTotalOly - ingresoActual) / config.cambioUSD)} USD)`;
        }

        // 7. Event Listeners y Ciclo de Vida
        const inputsToWatch = [dom.pais, dom.mensajes, dom.ticket, dom.nomina, dom.agenda, dom.asistencia];
        inputsToWatch.forEach(el => el.addEventListener('input', updateCalculations));

        window.onload = () => {
            lucide.createIcons();
            syncExchangeRates(); // Inicia sincronizaci√≥n en tiempo real
            updateCalculations();
        };
    </script>
</body>
</html>