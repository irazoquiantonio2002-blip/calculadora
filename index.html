<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oly Systems - Auditor√≠a de Alta Eficiencia</title>
    <!-- Tailwind CSS para el dise√±o premium -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons para la iconograf√≠a -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap');
        
        :root {
            --primary: #10b981; /* Emerald 500 */
            --primary-dark: #059669;
            --glass-bg: rgba(255, 255, 255, 0.6);
            --mercury-gradient: linear-gradient(135deg, #ffffff 0%, #f1f5f9 50%, #e2e8f0 100%);
        }

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #fcfcfc;
            background-image: 
                radial-gradient(at 0% 0%, rgba(226, 232, 240, 0.5) 0px, transparent 50%),
                radial-gradient(at 100% 100%, rgba(209, 213, 219, 0.3) 0px, transparent 50%);
            scroll-behavior: smooth;
            overflow-x: hidden;
        }

        /* Destellos de luz plateados redondos */
        .light-glow {
            position: fixed;
            width: 500px;
            height: 500px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(226, 232, 240, 0.4) 60%, transparent 100%);
            z-index: -1;
            filter: blur(60px);
            pointer-events: none;
        }

        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(160%);
            -webkit-backdrop-filter: blur(20px) saturate(160%);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 24px -1px rgba(0, 0, 0, 0.03);
        }

        .mercury-card {
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(255, 255, 255, 1);
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.03);
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .mercury-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -15px rgba(0,0,0,0.06);
            border-color: rgba(16, 185, 129, 0.2);
            background: rgba(255, 255, 255, 0.95);
        }

        /* Bot√≥n estilo Big Tech Plata/Esmeralda */
        .btn-mercury {
            background: linear-gradient(135deg, #064e3b 0%, #065f46 100%);
            color: white;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-mercury:hover {
            box-shadow: 0 12px 24px -6px rgba(16, 185, 129, 0.4);
            transform: translateY(-2px) scale(1.02);
        }

        /* Sliders Elegantes */
        input[type="range"] {
            -webkit-appearance: none;
            height: 2px;
            background: #e2e8f0;
            border-radius: 1px;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: #ffffff;
            border: 1px solid #d1d5db;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            border-color: var(--primary);
            box-shadow: 0 0 0 6px rgba(16, 185, 129, 0.1);
        }

        .text-mercury-title {
            background: linear-gradient(to right, #1e293b, #94a3b8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
        }

        .loading-pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.4; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- Destellos de fondo Mercurio -->
    <div class="light-glow" style="top: -5%; left: 10%;"></div>
    <div class="light-glow" style="bottom: 5%; right: 5%; width: 600px; height: 600px; background: radial-gradient(circle, rgba(16,185,129,0.03) 0%, transparent 70%);"></div>

    <div class="max-w-7xl mx-auto p-4 md:p-8 relative">
        
        <!-- HEADER SIN LOGOS - ESTILO APPLE -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-10 glass-panel p-8 rounded-[2rem]">
            <div class="text-center md:text-left">
                <h1 class="text-3xl font-black tracking-tighter text-mercury-title uppercase mb-1">Oly Systems</h1>
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-[0.4em] ml-0.5">Auditor√≠a Operativa de √âlite</p>
            </div>
            
            <div class="flex gap-10 mt-6 md:mt-0">
                <div class="text-right border-r pr-10 border-slate-200">
                    <p class="text-[9px] text-slate-400 font-black uppercase tracking-widest mb-1.5">Sincronizaci√≥n</p>
                    <p id="api-status" class="text-[10px] font-black text-emerald-600 flex items-center gap-2 justify-end loading-pulse">
                        <span class="w-1.5 h-1.5 rounded-full bg-emerald-500"></span> Mercado en Vivo
                    </p>
                </div>
                <div class="text-right">
                    <p class="text-[9px] text-slate-400 font-black uppercase tracking-widest mb-1.5">Regi√≥n</p>
                    <p id="display-pais" class="text-xs font-bold text-slate-700 flex items-center gap-2 justify-end">
                        <span id="country-flag">üá≤üáΩ</span> <span id="country-name">M√©xico</span>
                    </p>
                </div>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- PANEL DE CONTROL (INPUTS) -->
            <aside class="lg:col-span-4 space-y-6">
                <div class="mercury-card p-8 rounded-[2.5rem]">
                    <h3 class="text-md font-bold mb-8 text-slate-700 uppercase tracking-widest flex items-center gap-2">
                        <i data-lucide="sliders" class="w-4 h-4 opacity-40"></i> Variables Actuales
                    </h3>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="text-[9px] font-black text-slate-400 uppercase mb-2 block tracking-widest">Mercado Local</label>
                            <select id="input-pais" class="w-full p-4 bg-slate-50 border border-slate-100 rounded-2xl focus:ring-4 focus:ring-emerald-500/5 outline-none transition-all font-semibold text-slate-600 text-sm appearance-none cursor-pointer">
                                <!-- Opciones por JS -->
                            </select>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="text-[9px] font-black text-slate-400 uppercase mb-2 block tracking-widest">Msjs / D√≠a</label>
                                <input type="number" id="input-mensajes" value="350" class="w-full p-4 bg-slate-50 border border-slate-100 rounded-2xl focus:ring-4 focus:ring-emerald-500/5 outline-none font-bold text-slate-700">
                            </div>
                            <div>
                                <label class="text-[9px] font-black text-emerald-600 uppercase mb-2 block tracking-widest">Costo Consulta</label>
                                <input type="number" id="input-ticket" value="1200" class="w-full p-4 bg-slate-50 border border-slate-100 rounded-2xl focus:ring-4 focus:ring-emerald-500/5 outline-none font-bold text-slate-700">
                                <span id="usd-input-ticket" class="text-[9px] text-slate-400 font-bold mt-2 block opacity-60"></span>
                            </div>
                        </div>

                        <div>
                            <label class="text-[9px] font-black text-slate-400 uppercase mb-2 block tracking-widest">N√≥mina Recepci√≥n (Mensual)</label>
                            <input type="number" id="input-nomina" value="15000" class="w-full p-5 bg-white border border-slate-200 rounded-2xl focus:ring-4 focus:ring-emerald-500/5 outline-none font-black text-2xl text-slate-800 shadow-sm transition-all">
                            <span id="usd-input-nomina" class="text-[10px] text-emerald-600 font-bold mt-2 block opacity-70"></span>
                        </div>

                        <div class="pt-6 space-y-6 border-t border-slate-50">
                            <div>
                                <div class="flex justify-between mb-2">
                                    <label class="text-[9px] font-black text-slate-400 uppercase tracking-widest">Tasa Agendamiento</label>
                                    <span id="val-agenda" class="text-[10px] font-black text-emerald-700">10%</span>
                                </div>
                                <input type="range" id="input-agenda" min="1" max="50" step="1" value="10" class="w-full">
                            </div>
                            <div>
                                <div class="flex justify-between mb-2">
                                    <label class="text-[9px] font-black text-slate-400 uppercase tracking-widest">Tasa Asistencia</label>
                                    <span id="val-asistencia" class="text-[10px] font-black text-emerald-700">70%</span>
                                </div>
                                <input type="range" id="input-asistencia" min="1" max="100" step="1" value="70" class="w-full">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-slate-900 p-8 rounded-[2.5rem] shadow-xl relative overflow-hidden group">
                    <div class="relative z-10">
                        <p class="text-[12px] font-medium italic text-slate-300 leading-relaxed">
                            "La inmediatez es el nuevo est√°ndar. La IA captura al paciente en <span class="text-white font-bold">0.4s</span>, antes de que busque otra opci√≥n."
                        </p>
                    </div>
                    <div class="absolute -right-4 -bottom-4 w-16 h-16 bg-emerald-500/10 rounded-full group-hover:scale-150 transition-transform duration-1000"></div>
                </div>
            </aside>

            <!-- PANEL DE RESULTADOS -->
            <main class="lg:col-span-8 space-y-8">
                
                <!-- HERO CARD: UTILIDAD TOTAL -->
                <section class="bg-white p-12 rounded-[3.5rem] text-slate-800 shadow-2xl shadow-slate-200/40 border border-white relative overflow-hidden group">
                    <div class="relative z-10">
                        <p class="text-slate-400 text-[10px] font-black uppercase tracking-[0.4em] mb-4">Utilidad Neta Mensual Proyectada</p>
                        <h2 id="res-ingreso-total" class="text-6xl md:text-8xl font-black mb-2 tracking-tighter text-slate-900">
                            $0.00
                        </h2>
                        <p id="usd-res-ingreso-total" class="text-emerald-600 text-lg mb-10 font-black tracking-tight"></p>
                        
                        <div class="flex flex-wrap gap-4">
                            <div class="flex flex-col bg-slate-50 p-5 rounded-3xl border border-slate-100 min-w-[200px] hover:bg-white hover:shadow-lg transition-all duration-300">
                                <span class="text-[10px] font-black uppercase mb-2 text-slate-400 tracking-widest">Ahorro en N√≥mina</span>
                                <span id="res-ahorro-operativo" class="text-xl font-black text-slate-800">$0</span>
                                <span id="usd-res-ahorro-operativo" class="text-[10px] font-bold text-slate-400 mt-1"></span>
                            </div>
                            <div class="flex flex-col bg-slate-50 p-5 rounded-3xl border border-slate-100 min-w-[200px] hover:bg-white hover:shadow-lg transition-all duration-300">
                                <span class="text-[10px] font-black uppercase mb-2 text-slate-400 tracking-widest">Facturaci√≥n Extra</span>
                                <span id="res-ventas-extras" class="text-xl font-black text-slate-800">$0</span>
                                <span id="usd-res-ventas-extras" class="text-[10px] font-bold text-slate-400 mt-1"></span>
                            </div>
                        </div>
                    </div>
                    <!-- Mercury Glow -->
                    <div class="absolute top-0 right-0 w-[600px] h-[600px] bg-emerald-50/30 rounded-full translate-x-1/2 -translate-y-1/2 blur-[120px] opacity-40"></div>
                </section>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    
                    <!-- AN√ÅLISIS DE COSTOS -->
                    <div class="mercury-card p-10 rounded-[3rem] flex flex-col h-full">
                        <h4 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.3em] mb-10">Eficiencia Operativa</h4>
                        
                        <div class="space-y-10 flex-grow">
                            <div>
                                <div class="flex justify-between items-end mb-3">
                                    <div class="flex flex-col">
                                        <span class="text-[9px] font-black text-slate-400 uppercase tracking-widest">Gasto Humano Actual</span>
                                        <span id="usd-res-costo-humano" class="text-[10px] font-bold text-slate-300"></span>
                                    </div>
                                    <span id="res-costo-humano" class="text-sm font-black text-slate-600">$0</span>
                                </div>
                                <div class="h-1.5 w-full bg-slate-100 rounded-full overflow-hidden">
                                    <div class="h-full bg-slate-300 rounded-full" style="width: 100%;"></div>
                                </div>
                            </div>

                            <div>
                                <div class="flex justify-between items-end mb-3">
                                    <div class="flex flex-col">
                                        <span class="text-[9px] font-black text-emerald-600 uppercase tracking-widest">Inversi√≥n Ecosistema IA</span>
                                        <span id="usd-res-costo-ia" class="text-[10px] font-bold text-emerald-200"></span>
                                    </div>
                                    <span id="res-costo-ia" class="text-sm font-black text-emerald-700">$0</span>
                                </div>
                                <div class="h-1.5 w-full bg-emerald-50 rounded-full overflow-hidden shadow-inner">
                                    <div id="bar-ia" class="h-full bg-emerald-500 rounded-full transition-all duration-1000 shadow-[0_0_10px_rgba(16,185,129,0.3)]" style="width: 0%;"></div>
                                </div>
                            </div>

                            <div class="pt-8 border-t border-slate-50 space-y-5">
                                <div class="flex justify-between items-center text-xs">
                                    <div class="flex flex-col">
                                        <span class="font-bold text-slate-500">Suscripci√≥n Oly Systems</span>
                                        <span id="usd-det-mantenimiento" class="text-[9px] text-slate-300 font-bold"></span>
                                    </div>
                                    <span id="det-mantenimiento" class="font-black text-slate-700">$0</span>
                                </div>
                                <div class="flex justify-between items-center text-xs">
                                    <div class="flex flex-col">
                                        <span class="font-bold text-slate-500">Procesamiento OpenAI</span>
                                        <span id="usd-det-openai" class="text-[9px] text-slate-300 font-bold"></span>
                                    </div>
                                    <span id="det-openai" class="font-black text-slate-700">$0</span>
                                </div>
                                <div class="flex justify-between items-center text-xs">
                                    <div class="flex flex-col">
                                        <span class="font-bold text-slate-500">Sesiones Meta API</span>
                                        <span id="usd-det-whatsapp" class="text-[9px] text-slate-300 font-bold"></span>
                                    </div>
                                    <span id="det-whatsapp" class="font-black text-slate-700">$0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- RENTABILIDAD NETA -->
                    <div class="bg-white p-10 rounded-[3rem] shadow-sm border border-slate-100 flex flex-col justify-between relative overflow-hidden">
                        <div class="relative z-10">
                            <h4 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.3em] mb-10">Plus de Rentabilidad</h4>
                            <div class="space-y-5">
                                <div class="bg-slate-50 p-6 rounded-3xl border border-slate-100">
                                    <p class="text-[9px] font-black text-slate-400 uppercase mb-2 tracking-widest">Beneficio Actual</p>
                                    <div class="flex justify-between items-end">
                                        <p id="res-ingreso-humano" class="text-2xl font-bold text-slate-400 tracking-tighter opacity-60">$0</p>
                                        <span id="usd-res-ingreso-humano" class="text-[10px] font-black text-slate-300 mb-1"></span>
                                    </div>
                                </div>
                                <div class="bg-emerald-50/40 p-6 rounded-3xl border border-emerald-100 shadow-sm">
                                    <p class="text-[9px] font-black text-emerald-600 uppercase mb-2 tracking-widest">Beneficio con Oly Systems</p>
                                    <div class="flex justify-between items-end">
                                        <p id="res-ingreso-oly-small" class="text-3xl font-black text-emerald-700 tracking-tighter">$0</p>
                                        <span id="usd-res-ingreso-oly-small" class="text-[10px] font-black text-emerald-600 opacity-60 mb-1"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-10 flex items-center gap-5 bg-slate-900 p-6 rounded-[2.5rem] shadow-2xl shadow-emerald-900/20 group relative z-10">
                            <div class="bg-emerald-500 p-3 rounded-2xl shadow-lg shadow-emerald-500/20 group-hover:rotate-6 transition-all duration-500">
                                <i data-lucide="trending-up" class="w-6 h-6 text-white"></i>
                            </div>
                            <div>
                                <p class="text-[9px] font-black uppercase text-emerald-400 leading-none mb-2 tracking-[0.2em]">Crecimiento Neto Real</p>
                                <div class="flex items-center gap-2">
                                    <p id="res-plus-neto" class="text-2xl font-black text-white leading-none tracking-tighter">+$0</p>
                                    <span id="usd-res-plus-neto" class="text-[11px] text-emerald-300 font-bold opacity-80"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- FOOTER BIG TECH -->
                <footer class="btn-mercury p-12 rounded-[3.5rem] flex flex-col md:flex-row items-center justify-between gap-10 relative overflow-hidden shadow-2xl">
                    <div class="text-center md:text-left relative z-10">
                        <h4 class="text-white font-black text-4xl mb-3 tracking-tighter">Escala tu cl√≠nica hoy</h4>
                        <p class="text-emerald-100 text-sm font-medium italic opacity-80 max-w-sm">
                            Este ecosistema amortiza su inversi√≥n total mediante la utilidad neta recuperada en el primer mes.
                        </p>
                    </div>
                    <button class="w-full md:w-auto bg-white text-emerald-900 font-black px-12 py-5 rounded-2xl transition-all shadow-xl hover:bg-emerald-50 hover:scale-105 active:scale-95 flex items-center justify-center gap-3 relative z-10">
                        IMPLEMENTAR AHORA
                        <i data-lucide="chevron-right" class="w-5 h-5"></i>
                    </button>
                    <div class="absolute -right-20 -bottom-20 w-64 h-64 bg-white/5 rounded-full blur-3xl"></div>
                </footer>

                <p class="text-center text-[10px] text-slate-300 font-black uppercase tracking-[0.6em] py-10">
                    Oly Systems ¬© 2024 / Auditor√≠a de Alto Impacto
                </p>
            </main>
        </div>
    </div>

    <script>
        /**
         * L√ìGICA DE NEGOCIO PREMIUM (JavaScript)
         */

        const paises = {
            MX: { nombre: 'M√©xico', moneda: 'MXN', cambioUSD: 19.50, costoWAService: 0.010, flag: 'üá≤üáΩ' },
            CO: { nombre: 'Colombia', moneda: 'COP', cambioUSD: 3950, costoWAService: 0.008, flag: 'üá®üá¥' },
            EC: { nombre: 'Ecuador', moneda: 'USD', cambioUSD: 1, costoWAService: 0.010, flag: 'üá™üá®' },
            ES: { nombre: 'Espa√±a', moneda: 'EUR', cambioUSD: 0.95, costoWAService: 0.035, flag: 'üá™üá∏' },
            AR: { nombre: 'Argentina', moneda: 'ARS', cambioUSD: 1000, costoWAService: 0.010, flag: 'üá¶üá∑' },
            CL: { nombre: 'Chile', moneda: 'CLP', cambioUSD: 940, costoWAService: 0.010, flag: 'üá®üá±' },
            PE: { nombre: 'Per√∫', moneda: 'PEN', cambioUSD: 3.75, costoWAService: 0.010, flag: 'üáµüá™' },
            US: { nombre: 'Estados Unidos', moneda: 'USD', cambioUSD: 1, costoWAService: 0.015, flag: 'üá∫üá∏' },
        };

        const dom = {
            pais: document.getElementById('input-pais'),
            mensajes: document.getElementById('input-mensajes'),
            ticket: document.getElementById('input-ticket'),
            nomina: document.getElementById('input-nomina'),
            agenda: document.getElementById('input-agenda'),
            asistencia: document.getElementById('input-asistencia'),
            apiStatus: document.getElementById('api-status')
        };

        Object.keys(paises).forEach(code => {
            const option = document.createElement('option');
            option.value = code;
            option.textContent = `${paises[code].flag} ${paises[code].nombre}`;
            dom.pais.appendChild(option);
        });

        function formatLocal(val, paisCode) {
            const config = paises[paisCode];
            return new Intl.NumberFormat('es-' + paisCode, { 
                style: 'currency', 
                currency: config.moneda,
                maximumFractionDigits: 0
            }).format(val);
        }

        function formatUSD(val) {
            return new Intl.NumberFormat('en-US', { 
                style: 'currency', 
                currency: 'USD',
                maximumFractionDigits: 0
            }).format(val);
        }

        async function syncExchangeRates(retries = 0) {
            const url = 'https://open.er-api.com/v6/latest/USD';
            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error('Network Error');
                const data = await response.json();
                if (data.result === 'success') {
                    const r = data.rates;
                    if (r.MXN) paises.MX.cambioUSD = r.MXN;
                    if (r.COP) paises.CO.cambioUSD = r.COP;
                    if (r.EUR) paises.ES.cambioUSD = r.EUR;
                    if (r.ARS) paises.AR.cambioUSD = r.ARS;
                    if (r.CLP) paises.CL.cambioUSD = r.CLP;
                    if (r.PEN) paises.PE.cambioUSD = r.PEN;
                    dom.apiStatus.classList.remove('loading-pulse');
                    dom.apiStatus.innerHTML = `<span class="w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]"></span> Mercado Actualizado`;
                    updateCalculations();
                }
            } catch (e) {
                if (retries < 3) setTimeout(() => syncExchangeRates(retries + 1), 2000);
            }
        }

        function updateCalculations() {
            const code = dom.pais.value;
            const config = paises[code];
            
            const msjsDiarios = Number(dom.mensajes.value);
            const ticket = Number(dom.ticket.value);
            const nominaActual = Number(dom.nomina.value);
            const tAgendaActual = Number(dom.agenda.value);
            const tAsistActual = Number(dom.asistencia.value);

            const interaccionesMes = msjsDiarios * 30;

            // --- COSTOS IA ---
            const costoMetaUSD = (interaccionesMes / 10) * config.costoWAService;
            const costoMetaLocal = costoMetaUSD * config.cambioUSD;

            const costoTokensUSD = interaccionesMes * 0.008;
            const costoTokensLocal = costoTokensUSD * config.cambioUSD;

            const baseMXN = 5000;
            const olyUSD = baseMXN / paises.MX.cambioUSD;
            const olyLocal = olyUSD * config.cambioUSD;

            const totalIALocal = costoMetaLocal + costoTokensLocal + olyLocal;

            // --- PROYECCI√ìN DE INGRESOS ---
            const conversionIA = tAgendaActual + 5;
            const citasActuales = interaccionesMes * (tAgendaActual / 100) * (tAsistActual / 100);
            const ingresoActualBruto = citasActuales * ticket;

            const citasIA = interaccionesMes * (conversionIA / 100) * (tAsistActual / 100);
            const ingresoIABruto = citasIA * ticket;

            // --- C√ÅLCULO DE UTILIDAD NETA REAL (INGRESOS - COSTOS) ---
            // Beneficio Actual = Ventas Actuales - N√≥mina Actual
            const beneficioActual = ingresoActualBruto - nominaActual;
            // Beneficio IA = Ventas IA - Costos IA
            const beneficioIA = ingresoIABruto - totalIALocal;

            const plusNetoReal = beneficioIA - beneficioActual;

            // UI
            document.getElementById('country-flag').textContent = config.flag;
            document.getElementById('country-name').textContent = config.nombre;
            document.getElementById('val-agenda').textContent = tAgendaActual + '%';
            document.getElementById('val-asistencia').textContent = tAsistActual + '%';

            document.getElementById('usd-input-ticket').textContent = `‚âà ${formatUSD(ticket / config.cambioUSD)} USD`;
            document.getElementById('usd-input-nomina').textContent = `‚âà ${formatUSD(nominaActual / config.cambioUSD)} USD`;

            // Hero
            document.getElementById('res-ingreso-total').textContent = formatLocal(plusNetoReal, code);
            document.getElementById('usd-res-ingreso-total').textContent = `‚âà ${formatUSD(plusNetoReal / config.cambioUSD)} USD de ganancia extra libre`;

            document.getElementById('res-ventas-extras').textContent = formatLocal(ingresoIABruto - ingresoActualBruto, code);
            document.getElementById('usd-res-ventas-extras').textContent = `‚âà ${formatUSD((ingresoIABruto - ingresoActualBruto) / config.cambioUSD)} USD`;

            document.getElementById('res-ahorro-operativo').textContent = formatLocal(nominaActual - totalIALocal, code);
            document.getElementById('usd-res-ahorro-operativo').textContent = `‚âà ${formatUSD((nominaActual - totalIALocal) / config.cambioUSD)} USD`;

            // Eficiencia
            document.getElementById('res-costo-humano').textContent = formatLocal(nominaActual, code);
            document.getElementById('usd-res-costo-humano').textContent = `‚âà ${formatUSD(nominaActual / config.cambioUSD)} USD`;
            document.getElementById('res-costo-ia').textContent = formatLocal(totalIALocal, code);
            document.getElementById('usd-res-costo-ia').textContent = `‚âà ${formatUSD(totalIALocal / config.cambioUSD)} USD`;
            
            const ratio = (totalIALocal / nominaActual) * 100;
            document.getElementById('bar-ia').style.width = Math.min(100, Math.max(5, ratio)) + '%';

            // Desglose
            document.getElementById('det-mantenimiento').textContent = formatLocal(olyLocal, code);
            document.getElementById('usd-det-mantenimiento').textContent = `‚âà ${formatUSD(olyUSD)} USD`;
            document.getElementById('det-openai').textContent = formatLocal(costoTokensLocal, code);
            document.getElementById('usd-det-openai').textContent = `‚âà ${formatUSD(costoTokensUSD)} USD`;
            document.getElementById('det-whatsapp').textContent = formatLocal(costoMetaLocal, code);
            document.getElementById('usd-det-whatsapp').textContent = `‚âà ${formatUSD(costoMetaUSD)} USD`;

            // Utilidad
            document.getElementById('res-ingreso-humano').textContent = formatLocal(beneficioActual, code);
            document.getElementById('usd-res-ingreso-humano').textContent = `‚âà ${formatUSD(beneficioActual / config.cambioUSD)} USD`;

            const olySmalls = document.querySelectorAll('#res-ingreso-oly-small');
            olySmalls.forEach(el => el.textContent = formatLocal(beneficioIA, code));
            document.getElementById('usd-res-ingreso-oly-small').textContent = `‚âà ${formatUSD(beneficioIA / config.cambioUSD)} USD`;

            document.getElementById('res-plus-neto').textContent = '+' + formatLocal(plusNetoReal, code);
            document.getElementById('usd-res-plus-neto').textContent = `(${formatUSD(plusNetoReal / config.cambioUSD)} USD)`;
        }

        const inputsToWatch = [dom.pais, dom.mensajes, dom.ticket, dom.nomina, dom.agenda, dom.asistencia];
        inputsToWatch.forEach(el => el.addEventListener('input', updateCalculations));

        window.onload = () => {
            lucide.createIcons();
            syncExchangeRates(); 
            updateCalculations();
        };
    </script>
</body>
</html>
